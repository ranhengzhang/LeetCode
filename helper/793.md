如何求x的阶乘末尾0的个数?

```
10进制中只有2和5相乘才会得到10，也就是每有一对2和5，就多一个末尾的0 

而阶乘又是从1开始乘到x，所以2的个数总是比5多，那么问题转化为求x！中有多少个5作为因子 

公式为 k = x/5 + x/5^2 + x/5^3 + ......
```

如何求x?

```
根据上面的公式，x/5 + x/5^2 + x/5^3 + ...... = k 

=> x/5 < k <=10^9 

=> x < 5 * 10^9 容易想到在[0, 5*k]内二分求解x
```

符合的x个数有多少个?

```
显然，x每+5，阶乘就会至少多乘一个5，末尾就会至少多一个0，所以如果上面的x有解，那就是5个，如果无解就是0
```

---

这题要拆分为2个部分来处理。

-   问题1：一个数的阶乘 n! ，其尾部0的个数如何计算
-   问题2：结果尾部有k个0的数字阶乘 x! 要如何统计

问题1：一个数的阶乘 n! ，其尾部0的个数如何计算

这个子问题是 [172. 阶乘后的零](https://leetcode.cn/problems/factorial-trailing-zeroes/) 的标准答案。

n! 中尾部0的个数

```js
// 时间复杂度：O(logN)
// 空间复杂度：O(1)
function getZeroCount(n) {
  let res = 0
  while(n !== 0) {
    n = Math.floor(n / 5)
    res += n
  }
  return res
}
```

问题2：结果尾部有k个0的数字阶乘 x! 要如何统计

定义一个函数f(k)，表示尾部含有k个0的阶乘结果的首个数字，则 `f(k+1)-f(k)`，表示阶乘结果含有k+1个0的首个数字减去阶乘结果含有k个0的首个数字。随着n的增加，n!尾部0的数量k会非递减，满足二分的前提条件。

关于二分的左右边界如何确定：二分的左边界l，取0即可，表示0个0，右边界和k有关，可以取5*k。简单举个栗子：

-   k=3，5*k=15，15! 刚好有3个0
-   k=5，5*k=25，25! 有6个0
-   k=6，5\*k=30，30! 有7个0 ... 往后 (5*k )! 中0的个数都不会小于 k 个。

接下来就是二分搜索的具体实现，查找含有k个0的最小阶乘结果，对于[0, 5k]，其在[0, w] 区域中阶乘结果尾部0的个数会小于k，剩下的另一部分区域中的数，0的个数会大于等于k。

查找的是大于等于w的最小值，而 getZeroCount(w) >= k

```js
function f(k) {
  let l = 0, r = 5 * k
  while(l < r) {
    const mid = Math.floor((l + r) / 2)
    const count = getZeroCount(mid)
    if(count < k) {
      l = mid + 1
    } else {
      r = mid
    }
  }
  return r
}
```